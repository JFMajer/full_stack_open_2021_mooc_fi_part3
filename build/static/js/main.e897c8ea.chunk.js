(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),a=t(15),r=t.n(a),u=(t(20),t(5)),i=t(3),s=(t(21),t(0)),l=function(e){return Object(s.jsxs)("li",{children:[e.person.name," ",e.person.number," ",Object(s.jsx)("button",{onClick:e.handleDelete,children:"delete"})]})},d=function(e){return Object(s.jsxs)("form",{onSubmit:e.addName,children:["name: ",Object(s.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),"number: ",Object(s.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange}),Object(s.jsx)("button",{type:"submit",children:"add"})]})},h=function(e){var n=e.search;return Object(s.jsxs)("div",{children:["search for ",Object(s.jsx)("input",{onChange:n})," "]})},b=t(4),j=t.n(b),f="http://localhost:3001/api/persons",m=function(){return j.a.get(f).then((function(e){return e.data}))},O=function(e){return j.a.post(f,e).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){var n=e.message;return""===n?null:Object(s.jsx)("div",{className:"message",children:n})},v=function(e){var n=e.errorMessage;return""===n?null:Object(s.jsx)("div",{className:"errorMessage",children:n})},w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),b=r[0],j=r[1],f=Object(c.useState)(""),w=Object(i.a)(f,2),N=w[0],C=w[1],y=Object(c.useState)(""),S=Object(i.a)(y,2),k=S[0],P=S[1],T=Object(c.useState)(""),D=Object(i.a)(T,2),F=D[0],L=D[1];Object(c.useEffect)((function(){m().then((function(e){console.log("promise fuillfiled"),o(e),console.log(t)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{search:function(e){var n=e.target.value.toLowerCase();o(t.map((function(e){return e.name.toLowerCase().includes(n)?Object(u.a)(Object(u.a)({},e),{},{display:!0}):Object(u.a)(Object(u.a)({},e),{},{display:!1})})))}}),Object(s.jsx)("h2",{children:"Add new"}),Object(s.jsx)(d,{addName:function(e){e.preventDefault(),console.log("hello");var n=!1,c={name:b,number:N,display:!0};console.log("person:",c),t.map((function(e){if(e.name===b)return window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&g(e.id,c).then((function(e){o(t.map((function(n){return n.id===e.id?e:n})))})).then((function(){P("Number for ".concat(e.name," updated")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){L("Something bad happened: ".concat(e))})),n=!0})),n||O(c).then((function(e){o(t.concat(e))})).then((function(){P("Person ".concat(c.name," has been added to phonebook!")),setTimeout((function(){P(null)}),5e3)})),j(""),C("")},newName:b,handleNameChange:function(e){j(e.target.value)},newNumber:N,handleNumberChange:function(e){C(e.target.value)}})]}),Object(s.jsx)(x,{message:k}),Object(s.jsx)(v,{errorMessage:F}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:t.filter((function(e){return e.display})).map((function(e){return Object(s.jsx)(l,{person:e,handleDelete:function(){return function(e){var n=e.id;window.confirm("you sure you want to remove ".concat(e.name,"?"))&&p(n).then(o(t.filter((function(e){return e.id!==n})))).then((function(){P("Person ".concat(e.name," has been removed!")),setTimeout((function(){P(null)}),5e3)}))}(e)}},e.name)}))})]})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),c(e),o(e),a(e),r(e)}))};r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),N()}},[[41,1,2]]]);
//# sourceMappingURL=main.e897c8ea.chunk.js.map